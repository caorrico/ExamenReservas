{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "Reservas API - Pruebas Funcionales",
		"description": "Colección completa de pruebas funcionales para el Sistema de Reservas Backend.\n\n**Proyecto**: Sistema de Reservas\n**Versión**: 1.1 (Corregida)\n**Fecha**: 2026-02-03\n\n## Instrucciones\n1. Importar el environment \"Reservas - Development\"\n2. Asegurar que el servidor esté corriendo en localhost:3000\n3. Ejecutar los tests en orden (Auth → Reservas)\n\n## Casos de Prueba\n- 18 casos de prueba totales\n- Cobertura de todos los endpoints\n- Validaciones incluidas",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "01 - Autenticación",
			"item": [
				{
					"name": "TC-001: Registro Exitoso",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 201 Created', function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test('Respuesta contiene mensaje de éxito', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.message).to.include('exitosamente');",
									"});",
									"",
									"pm.test('Respuesta contiene datos del usuario', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.user).to.have.property('email');",
									"    pm.expect(response.user).to.not.have.property('password');",
									"});",
									"",
									"pm.test('Tiempo de respuesta menor a 500ms', function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(500);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar email único para evitar duplicados",
									"const timestamp = Date.now();",
									"const testEmail = `test_${timestamp}@pruebas.com`;",
									"pm.environment.set('test_email', testEmail);",
									"pm.environment.set('test_password', 'Password123!');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"password\": \"{{test_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						},
						"description": "**TC-001**: Registro de nuevo usuario con datos válidos.\n\n**Precondiciones**: Email no existe en el sistema\n\n**Datos de entrada**:\n- Email: único generado dinámicamente\n- Password: cumple política de seguridad\n\n**Resultado esperado**: 201 Created"
					},
					"response": []
				},
				{
					"name": "TC-002: Registro Email Duplicado",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Respuesta contiene mensaje de error', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('error');",
									"});",
									"",
									"pm.test('Mensaje no revela información sensible', function () {",
									"    const response = pm.response.json();",
									"    // El mensaje debe ser genérico, no revelar si el usuario existe",
									"    pm.expect(response.error).to.not.include('ya existe');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"password\": \"{{test_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						},
						"description": "**TC-002**: Intento de registro con email ya existente.\n\n**Precondiciones**: Email ya registrado (TC-001)\n\n**Resultado esperado**: 400 Bad Request con mensaje genérico"
					},
					"response": []
				},
				{
					"name": "TC-003: Login Exitoso",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 200 OK', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Respuesta contiene token JWT', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('token');",
									"    pm.expect(response.token).to.be.a('string');",
									"    pm.expect(response.token.split('.')).to.have.lengthOf(3);",
									"});",
									"",
									"pm.test('Token tiene formato JWT válido', function () {",
									"    const response = pm.response.json();",
									"    const parts = response.token.split('.');",
									"    pm.expect(parts).to.have.lengthOf(3);",
									"    // Guardar token para siguientes requests",
									"    pm.environment.set('auth_token', response.token);",
									"});",
									"",
									"pm.test('Respuesta incluye tiempo de expiración', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('expiresIn');",
									"});",
									"",
									"pm.test('Tiempo de respuesta menor a 300ms', function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(300);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"password\": \"{{test_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						},
						"description": "**TC-003**: Login con credenciales válidas.\n\n**Precondiciones**: Usuario registrado (TC-001)\n\n**Resultado esperado**: 200 OK con token JWT"
					},
					"response": []
				},
				{
					"name": "TC-004: Login Credenciales Inválidas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje de error genérico', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.error).to.equal('Credenciales inválidas');",
									"});",
									"",
									"pm.test('No revela si el usuario existe', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.error).to.not.include('usuario no encontrado');",
									"    pm.expect(response.error).to.not.include('contraseña incorrecta');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"password\": \"WrongPassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						},
						"description": "**TC-004**: Login con contraseña incorrecta.\n\n**Resultado esperado**: 400 Bad Request con mensaje genérico"
					},
					"response": []
				},
				{
					"name": "TC-005: Obtener Perfil",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 200 OK', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Respuesta contiene datos del usuario', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.user).to.have.property('email');",
									"    pm.expect(response.user).to.have.property('id');",
									"});",
									"",
									"pm.test('No expone la contraseña', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.user).to.not.have.property('password');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/profile",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "profile"]
						},
						"description": "**TC-005**: Obtener perfil del usuario autenticado.\n\n**Precondiciones**: Token válido (TC-003)\n\n**Resultado esperado**: 200 OK con datos del usuario"
					},
					"response": []
				}
			],
			"description": "Pruebas de endpoints de autenticación:\n- Registro\n- Login\n- Perfil"
		},
		{
			"name": "02 - Reservas",
			"item": [
				{
					"name": "TC-006: Crear Reserva Exitosa",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 201 Created', function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test('Respuesta contiene datos de la reserva', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('reserva');",
									"    pm.expect(response.reserva).to.have.property('id');",
									"    pm.expect(response.reserva).to.have.property('fecha');",
									"    pm.expect(response.reserva).to.have.property('hora');",
									"    pm.expect(response.reserva).to.have.property('sala');",
									"});",
									"",
									"pm.test('Guardar ID de reserva para siguientes tests', function () {",
									"    const response = pm.response.json();",
									"    pm.environment.set('reserva_id', response.reserva.id);",
									"});",
									"",
									"pm.test('Mensaje de éxito', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.message).to.include('exitosamente');",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar fecha futura (mañana)",
									"const tomorrow = new Date();",
									"tomorrow.setDate(tomorrow.getDate() + 1);",
									"const fecha = tomorrow.toISOString().split('T')[0];",
									"pm.environment.set('test_fecha', fecha);",
									"pm.environment.set('test_hora', '10:00');",
									"pm.environment.set('test_sala', 'Sala A');"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha\": \"{{test_fecha}}\",\n    \"hora\": \"{{test_hora}}\",\n    \"sala\": \"{{test_sala}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-006**: Crear una reserva con datos válidos.\n\n**Precondiciones**: Usuario autenticado\n\n**Resultado esperado**: 201 Created con datos de la reserva"
					},
					"response": []
				},
				{
					"name": "TC-007: Crear Reserva Sin Auth",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 401 Unauthorized', function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test('Mensaje de acceso denegado', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.error).to.include('Acceso denegado');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha\": \"{{test_fecha}}\",\n    \"hora\": \"14:00\",\n    \"sala\": \"Sala B\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-007**: Intento de crear reserva sin token de autenticación.\n\n**Resultado esperado**: 401 Unauthorized"
					},
					"response": []
				},
				{
					"name": "TC-008: Crear Reserva Datos Inválidos",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Respuesta contiene errores de validación', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('error');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha\": \"\",\n    \"hora\": \"\",\n    \"sala\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-008**: Crear reserva con campos vacíos.\n\n**Resultado esperado**: 400 Bad Request con errores de validación"
					},
					"response": []
				},
				{
					"name": "TC-009: Crear Reserva Duplicada",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 409 Conflict', function () {",
									"    pm.response.to.have.status(409);",
									"});",
									"",
									"pm.test('Mensaje indica conflicto de reserva', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.error).to.include('Conflicto');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha\": \"{{test_fecha}}\",\n    \"hora\": \"{{test_hora}}\",\n    \"sala\": \"{{test_sala}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-009**: Intentar crear reserva duplicada (mismo fecha/hora/sala).\n\n**Precondiciones**: TC-006 ejecutado\n\n**Resultado esperado**: 409 Conflict"
					},
					"response": []
				},
				{
					"name": "TC-010: Obtener Mis Reservas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 200 OK', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Respuesta es un array', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.reservas).to.be.an('array');",
									"});",
									"",
									"pm.test('Array contiene al menos una reserva', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.reservas.length).to.be.at.least(1);",
									"});",
									"",
									"pm.test('Reservas tienen estructura correcta', function () {",
									"    const response = pm.response.json();",
									"    if (response.reservas.length > 0) {",
									"        const reserva = response.reservas[0];",
									"        pm.expect(reserva).to.have.property('_id');",
									"        pm.expect(reserva).to.have.property('fecha');",
									"        pm.expect(reserva).to.have.property('hora');",
									"        pm.expect(reserva).to.have.property('sala');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-010**: Obtener todas las reservas del usuario autenticado.\n\n**Resultado esperado**: 200 OK con array de reservas"
					},
					"response": []
				},
				{
					"name": "TC-011: Obtener Reserva por ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 200 OK', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Reserva tiene datos correctos', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.reserva).to.have.property('_id');",
									"    pm.expect(response.reserva._id).to.equal(pm.environment.get('reserva_id'));",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/reservas/{{reserva_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas", "{{reserva_id}}"]
						},
						"description": "**TC-011**: Obtener una reserva específica por ID.\n\n**Resultado esperado**: 200 OK con datos de la reserva"
					},
					"response": []
				},
				{
					"name": "TC-012: Eliminar Reserva Propia",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 200 OK', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Mensaje de eliminación exitosa', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.message).to.include('eliminada');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/reservas/{{reserva_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas", "{{reserva_id}}"]
						},
						"description": "**TC-012**: Eliminar una reserva propia.\n\n**Resultado esperado**: 200 OK"
					},
					"response": []
				},
				{
					"name": "TC-013: Eliminar Reserva Inexistente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 404 Not Found', function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test('Mensaje indica que no existe', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response.error).to.include('no encontrada');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/reservas/{{reserva_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas", "{{reserva_id}}"]
						},
						"description": "**TC-013**: Eliminar reserva que ya no existe.\n\n**Resultado esperado**: 404 Not Found"
					},
					"response": []
				}
			],
			"description": "Pruebas de endpoints de reservas (CRUD):\n- Crear\n- Listar\n- Obtener por ID\n- Eliminar"
		},
		{
			"name": "03 - Validaciones",
			"item": [
				{
					"name": "TC-014: Email Formato Inválido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error menciona email inválido', function () {",
									"    const response = pm.response.json();",
									"    const errorStr = JSON.stringify(response).toLowerCase();",
									"    pm.expect(errorStr).to.include('email');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"esto-no-es-email\",\n    \"password\": \"Password123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						},
						"description": "**TC-014**: Registro con email mal formateado.\n\n**Resultado esperado**: 400 Bad Request"
					},
					"response": []
				},
				{
					"name": "TC-015: Contraseña Débil",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error indica requisitos de contraseña', function () {",
									"    const response = pm.response.json();",
									"    pm.expect(response).to.have.property('error');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"weak_pass@test.com\",\n    \"password\": \"123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						},
						"description": "**TC-015**: Registro con contraseña que no cumple política.\n\n**Resultado esperado**: 400 Bad Request"
					},
					"response": []
				},
				{
					"name": "TC-016: Fecha en el Pasado",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error menciona fecha', function () {",
									"    const response = pm.response.json();",
									"    const errorStr = JSON.stringify(response).toLowerCase();",
									"    pm.expect(errorStr).to.include('fecha');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha\": \"2020-01-01\",\n    \"hora\": \"10:00\",\n    \"sala\": \"Sala A\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-016**: Crear reserva con fecha pasada.\n\n**Resultado esperado**: 400 Bad Request"
					},
					"response": []
				},
				{
					"name": "TC-017: Hora Fuera de Rango",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error menciona hora', function () {",
									"    const response = pm.response.json();",
									"    const errorStr = JSON.stringify(response).toLowerCase();",
									"    pm.expect(errorStr).to.include('hora');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha\": \"{{test_fecha}}\",\n    \"hora\": \"25:00\",\n    \"sala\": \"Sala A\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-017**: Crear reserva con hora inválida (fuera de rango).\n\n**Resultado esperado**: 400 Bad Request"
					},
					"response": []
				},
				{
					"name": "TC-018: Sala Inválida",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code es 400 Bad Request', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Error menciona sala', function () {",
									"    const response = pm.response.json();",
									"    const errorStr = JSON.stringify(response).toLowerCase();",
									"    pm.expect(errorStr).to.include('sala');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fecha\": \"{{test_fecha}}\",\n    \"hora\": \"10:00\",\n    \"sala\": \"Sala XYZ Inexistente\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reservas",
							"host": ["{{base_url}}"],
							"path": ["api", "reservas"]
						},
						"description": "**TC-018**: Crear reserva con sala que no existe.\n\n**Resultado esperado**: 400 Bad Request"
					},
					"response": []
				}
			],
			"description": "Pruebas de validaciones de entrada:\n- Formato de email\n- Política de contraseñas\n- Validación de fechas\n- Validación de horas\n- Validación de salas"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script global de pre-request",
					"console.log('Ejecutando: ' + pm.info.requestName);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script global de test",
					"pm.test('Content-Type es application/json', function () {",
					"    if (pm.response.code !== 204) {",
					"        pm.response.to.have.header('Content-Type');",
					"        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"    }",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"type": "string"
		}
	]
}
